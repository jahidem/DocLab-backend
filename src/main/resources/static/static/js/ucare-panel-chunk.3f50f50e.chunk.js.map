{"version":3,"file":"static/js/ucare-panel-chunk.3f50f50e.chunk.js","mappings":"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","sources":["../node_modules/@uploadcare/react-widget/dist/esm/dialog-de6a3d54.js"],"sourcesContent":["import { b as _slicedToArray, c as _objectSpread2, e as _createForOfIteratorHelper } from './index-63588323.js';\nimport React, { useRef, useEffect, useImperativeHandle } from 'react';\nimport uploadcare from 'uploadcare-widget';\nimport { u as useEventCallback, a as useCustomTabs, b as useDeepEffect } from './use-deep-effect-19227628.js';\nimport 'react-fast-compare';\nimport '@uploadcare/client-suspense';\n\nvar containerStyles = {\n  height: '500px',\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'center'\n};\nvar hiddenDoneButtonStyle =\n/* css */\n\"\\n  .uploadcare--preview__done, .uploadcare--panel__done {\\n    display: none;\\n  }\\n\";\n\nvar useDialog = function useDialog(props, uploadcare) {\n  var _props$value = props.value,\n      value = _props$value === void 0 ? [] : _props$value,\n      apiRef = props.apiRef,\n      customTabs = props.customTabs,\n      tabsCss = props.tabsCss,\n      locale = props.locale,\n      localeTranslations = props.localeTranslations,\n      localePluralize = props.localePluralize,\n      onTabChange = props.onTabChange,\n      onChange = props.onChange,\n      onProgress = props.onProgress;\n  var panelContainer = useRef(null);\n  var panelInstance = useRef(null);\n  var onTabChangeCallback = useEventCallback(onTabChange);\n  var onChangeCallback = useEventCallback(onChange);\n  var onProgressCallback = useEventCallback(onProgress);\n  useCustomTabs(customTabs, uploadcare);\n  useDeepEffect(function () {\n    if (locale) window.UPLOADCARE_LOCALE = locale;\n    if (localePluralize) window.UPLOADCARE_LOCALE_PLURALIZE = localePluralize;\n\n    if (localeTranslations) {\n      window.UPLOADCARE_LOCALE_TRANSLATIONS = localeTranslations;\n    }\n\n    return function () {\n      if (locale) delete window.UPLOADCARE_LOCALE;\n      if (localePluralize) delete window.UPLOADCARE_LOCALE_PLURALIZE;\n      if (localeTranslations) delete window.UPLOADCARE_LOCALE_TRANSLATIONS;\n    };\n  }, [locale, localePluralize, localeTranslations]);\n  useEffect(function () {\n    if (uploadcare && tabsCss && typeof tabsCss === 'string') {\n      if (tabsCss.indexOf('https://') === 0) {\n        uploadcare.tabsCss.addUrl(tabsCss);\n      } else {\n        uploadcare.tabsCss.addStyle(tabsCss);\n      }\n    }\n  }, [uploadcare, tabsCss]);\n  useEffect(function () {\n    var files = Array.isArray(value) ? value : [value];\n    panelInstance.current && panelInstance.current.reject();\n    panelInstance.current = uploadcare.openPanel(panelContainer.current, files, _objectSpread2(_objectSpread2({\n      multipleMax: props.multiple ? undefined : 1\n    }, props), {}, {\n      multiple: true\n    })); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [uploadcare, props]);\n  useEffect(function () {\n    var dialogApi = panelInstance.current;\n    dialogApi.progress(onTabChangeCallback);\n\n    var onChangeWrapper = function onChangeWrapper() {\n      var items = panelInstance.current.fileColl.__items.map(function (deferred) {\n        return deferred.promise();\n      });\n\n      onChangeCallback(items);\n    };\n\n    var onProgressWrapper = function onProgressWrapper() {\n      var lastProgresses = panelInstance.current.fileColl.lastProgresses();\n      onProgressCallback(lastProgresses);\n    };\n\n    dialogApi.fileColl.anyProgressList.add(onProgressWrapper);\n    dialogApi.fileColl.anyDoneList.add(onChangeWrapper);\n    dialogApi.fileColl.anyFailList.add(onChangeWrapper);\n    dialogApi.fileColl.onRemove.add(onChangeWrapper);\n    dialogApi.fileColl.onReplace.add(onChangeWrapper);\n    dialogApi.fileColl.onSort.add(onChangeWrapper);\n    return function () {\n      var dialogApi = panelInstance.current;\n      dialogApi.fileColl.anyProgressList.remove(onProgressWrapper);\n      dialogApi.fileColl.anyDoneList.remove(onChangeWrapper);\n      dialogApi.fileColl.anyFailList.remove(onChangeWrapper);\n      dialogApi.fileColl.onRemove.remove(onChangeWrapper);\n      dialogApi.fileColl.onReplace.remove(onChangeWrapper);\n      dialogApi.fileColl.onSort.remove(onChangeWrapper);\n    };\n  }, [onTabChangeCallback, onChangeCallback, onProgressCallback]);\n  useImperativeHandle(apiRef, function () {\n    return {\n      onTabVisibility: function onTabVisibility(cb) {\n        return panelInstance.current.onTabVisibility(cb);\n      },\n      hideTab: function hideTab(tab) {\n        return panelInstance.current.hideTab(tab);\n      },\n      showTab: function showTab(tab) {\n        return panelInstance.current.showTab(tab);\n      },\n      switchTab: function switchTab(tab) {\n        return panelInstance.current.switchTab(tab);\n      },\n      addFiles: function addFiles(files) {\n        return panelInstance.current.addFiles(files);\n      },\n      isTabVisible: function isTabVisible(tab) {\n        return panelInstance.current.isTabVisible(tab);\n      },\n      getFileColl: function getFileColl() {\n        return panelInstance.current.fileColl;\n      },\n      getRawDialogApi: function getRawDialogApi() {\n        return panelInstance.current;\n      }\n    };\n  }, []);\n  useEffect(function () {\n    return function () {\n      return panelInstance.current && panelInstance.current.reject();\n    };\n  }, []);\n  useEffect(function () {\n    var isUpdated = false;\n    panelInstance.current.fileColl.clear();\n\n    var _iterator = _createForOfIteratorHelper(value),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var item = _step.value;\n\n        if (typeof item === 'string' && item.includes('~')) {\n          uploadcare.loadFileGroup(item, props).then(function (fileGroup) {\n            // value could be changed after group loaded\n            if (!isUpdated) {\n              var files = fileGroup.files();\n              panelInstance.current.addFiles(files);\n            }\n          });\n          break;\n        }\n\n        panelInstance.current.fileColl.add(uploadcare.fileFrom('uploaded', item, props));\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return function () {\n      isUpdated = true;\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [value]);\n  return [panelContainer];\n};\n\nvar Dialog = function Dialog(props) {\n  var _useDialog = useDialog(props, uploadcare),\n      _useDialog2 = _slicedToArray(_useDialog, 1),\n      containerRef = _useDialog2[0];\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: props.id,\n    style: containerStyles\n  }, /*#__PURE__*/React.createElement(\"style\", null, hiddenDoneButtonStyle), /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef\n  }));\n};\n\nexport { Dialog as default };\n"],"names":["containerStyles","height","display","flexDirection","alignItems","justifyContent","Dialog","props","_useDialog","uploadcare","_props$value","value","apiRef","customTabs","tabsCss","locale","localeTranslations","localePluralize","onTabChange","onChange","onProgress","panelContainer","useRef","panelInstance","onTabChangeCallback","useEventCallback","onChangeCallback","onProgressCallback","useCustomTabs","useDeepEffect","window","UPLOADCARE_LOCALE","UPLOADCARE_LOCALE_PLURALIZE","UPLOADCARE_LOCALE_TRANSLATIONS","useEffect","indexOf","addUrl","addStyle","files","Array","isArray","current","reject","openPanel","_objectSpread2","multipleMax","multiple","undefined","dialogApi","progress","onChangeWrapper","items","fileColl","__items","map","deferred","promise","onProgressWrapper","lastProgresses","anyProgressList","add","anyDoneList","anyFailList","onRemove","onReplace","onSort","remove","useImperativeHandle","onTabVisibility","cb","hideTab","tab","showTab","switchTab","addFiles","isTabVisible","getFileColl","getRawDialogApi","isUpdated","clear","_step","_iterator","_createForOfIteratorHelper","s","n","done","item","includes","loadFileGroup","then","fileGroup","fileFrom","err","e","f","useDialog","containerRef","_slicedToArray","React","id","style","ref"],"sourceRoot":""}